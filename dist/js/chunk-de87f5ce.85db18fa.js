(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-de87f5ce"],{1216:function(e,t,r){"use strict";r.d(t,"g",(function(){return a})),r.d(t,"i",(function(){return o})),r.d(t,"a",(function(){return s})),r.d(t,"j",(function(){return d})),r.d(t,"d",(function(){return u})),r.d(t,"c",(function(){return c})),r.d(t,"e",(function(){return l})),r.d(t,"b",(function(){return m})),r.d(t,"f",(function(){return p})),r.d(t,"h",(function(){return f}));var n=r("b775"),i={service:"/service",permissionNoPager:"/permission/no-pager",orgTree:"/org/getOrgTree",queryTree:"/org/queryOrgTree",add:"/org/add",update:"/org/update",delete:"/org/delete",subTree:"/org/getSubOrgTree"};function a(e){return Object(n["b"])({url:i.orgTree,method:"get",params:e})}function o(e){return Object(n["b"])({url:i.queryTree,method:"get",params:e})}function s(e){return Object(n["b"])({url:i.add,method:"post",params:e})}function d(e){return Object(n["b"])({url:i.update,method:"post",params:e})}function u(e){return Object(n["b"])({url:i.delete,method:"get",params:e})}function c(e){return Object(n["b"])({url:"org/assignRoles",method:"post",params:e})}function l(e){return Object(n["b"])({url:"/org/getRoles",method:"get",params:e})}function m(e){return Object(n["b"])({url:"role/assignOrgs",method:"post",params:e})}function p(e){e.fields="dept_id";var t=[];if(e.role_id){var r={col:"role_id"};r.value=e.role_id,r.opt="=",t.push(r)}return t.length>0&&(e.wheres=JSON.stringify([t])),Object(n["b"])({url:"common/query/portal.t_sys_role_dept",method:"post",params:e})}function f(e){return Object(n["b"])({url:"org/isAllowDelete",method:"post",params:e})}},b107:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:600,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{label:"父级"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["parent_name",{initialValue:e.parent_name},{}],expression:"[\n            'parent_name',\n            {\n              initialValue: parent_name\n            },{}]"}],attrs:{disabled:""}})],1),t("a-form-item",{attrs:{label:"部门名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["dept_name",{}],expression:"['dept_name', {}]"}]})],1)],1)],1)],1)},i=[],a=r("5530"),o=r("1216"),s={name:"OrgForm",data:function(){return{isEdit:!1,title:"",parent_id:0,parent_name:"",labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},visible:!1,confirmLoading:!1,mdl:{}}},beforeCreate:function(){this.form=this.$form.createForm(this)},created:function(){},methods:{add:function(e){this.form.resetFields(),this.isEdit=!1,this.title="新建部门",this.parent_id=e&&e.dept_id||0,this.parent_name=e&&e.dept_name||"顶级部门",this.visible=!0},edit:function(e){var t=this;this.isEdit=!0,this.title="编辑部门",this.mdl=Object.assign({},e),this.parent_id=e.parent_id,this.dept_id=e.dept_id,this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue(Object(a["a"])({},e))}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this.mdl;this.form.validateFields((function(r,n){if(!r){Object.assign({},t,n);return n.parent_id=e.parent_id,e.isEdit?(n.dept_id=e.dept_id,Object(o["j"])(Object.assign(n)).then((function(t){"ok"===t.state?(e.visible=!1,e.$emit("ok",n)):e.$error({title:"错误提示",content:t.msg})}))):Object(o["a"])(Object.assign(n)).then((function(t){"ok"===t.state?(e.visible=!1,e.$emit("ok",n)):e.$error({title:"错误提示",content:t.msg})}))}}))},handleCancel:function(){this.close()}}},d=s,u=r("2877"),c=Object(u["a"])(d,n,i,!1,null,null,null);t["default"]=c.exports}}]);