(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-183f2808"],{5294:function(t,e,n){},"8d20":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("a-card",{attrs:{bordered:!1}},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:48}},[e("a-col",{attrs:{md:8,sm:24}},[e("a-form-item",{attrs:{label:"标题",prop:"cities"}},[e("a-input",{attrs:{placeholder:"请输入"},model:{value:t.not.notice_title,callback:function(e){t.$set(t.not,"notice_title",e)},expression:"not.notice_title"}})],1)],1),e("a-col",{attrs:{md:8,sm:24}},[e("a-form-item",{attrs:{label:"类型"}},[e("a-select",{attrs:{placeholder:"请选择"},on:{change:t.onChange},model:{value:t.not.notice_type,callback:function(e){t.$set(t.not,"notice_type",e)},expression:"not.notice_type"}},t._l(t.notTypeData,(function(n){return e("a-select-option",{key:n.dic_name,attrs:{value:n.dic_name}},[t._v(" "+t._s(n.dic_name)+" ")])})),1)],1)],1),e("a-col",{attrs:{md:8,sm:24}},[e("span",{staticClass:"table-page-search-submitButtons"},[e("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.table.refresh(!0)}}},[t._v("查询")]),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return t.not={}}}},[t._v("重置")]),e("a-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"primary"},on:{click:function(e){return t.$refs.createModal.add()}}},[t._v("添加")])],1)])],1)],1)],1),e("s-table",{ref:"table",attrs:{size:"default",columns:t.columns,data:t.loadData,alert:!1,rowKey:function(t){return t.id},rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange}},scopedSlots:t._u([{key:"status",fn:function(n){return e("span",{},[e("a-badge",{attrs:{status:t._f("statusTypeFilter")(n),text:t._f("statusFilter")(n)}})],1)}},{key:"level",fn:function(n){return[e("span",{class:"level"+n||!1},[t._v(" "+t._s(t._f("levelFilter")(n))+" ")])]}},{key:"showType",fn:function(n){return e("span",{},[e("a-badge",{attrs:{status:t._f("showTypeFilter")(n),text:t._f("showTypeFilter")(n)}})],1)}},{key:"action",fn:function(n,a){return e("span",{},[e("a",{on:{click:function(e){return t.menuClick(a)}}},[t._v("查看")]),""!==a.parent_id?e("a-divider",{attrs:{type:"vertical"}}):t._e(),e("a",{on:{click:function(e){return t.$refs.createModal.edit(a)}}},[t._v("编辑")]),""!==a.parent_id?e("a-divider",{attrs:{type:"vertical"}}):t._e(),""!==a.parent_id?e("a",{staticStyle:{color:"red"},on:{click:function(e){return t.deleteItem(a)}}},[t._v("删除")]):t._e()],1)}}])}),e("not-form",{ref:"createModal",on:{ok:t.handleOk}}),e("not-details-form",{ref:"detailModal"})],1)},o=[],i=n("2af9"),s=n("1b88"),r=n("3eca"),c=n("bdb2"),l={0:{status:"error",text:"未发布"},1:{status:"success",text:"已发布"}},d={name:"TreeList",components:{STable:i["l"],NotForm:s["default"],NotDetailsForm:r["default"]},created:function(){this.getNotLoadType(),this.getNotOrgName()},data:function(){var t=this;return{form:null,title:"",disabled:"",not:{},advanced:!1,notTypeData:[],queryParam:{fields:"id, notice_title, notice_type, notice_content, status, valid_date, update_time, remark, dept_id"},detailModalShow:!1,columns:[{title:"标题",width:"30%",dataIndex:"notice_title",key:"notice_title"},{title:"类型",dataIndex:"notice_type",key:"notice_type"},{title:"状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"级别",dataIndex:"notice_level",key:"notice_level",scopedSlots:{customRender:"level"}},{title:"展示范围",dataIndex:"show_type",key:"show_type",scopedSlots:{customRender:"showType"}},{title:"失效时间",dataIndex:"valid_date",key:"valid_date"},{title:"创建时间",dataIndex:"create_date",key:"create_date"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],loadData:function(e){var n=t.not.notice_title,a=t.not.notice_type,o=[];return n&&o.push({col:"notice_title",value:"%"+n+"%",opt:" like"}),a&&o.push({col:"notice_type",value:a,opt:"="}),Object(c["g"])(o.length>0?Object.assign(e,t.queryParam,{wheres:JSON.stringify(o)},{orderBy:"id desc"}):Object.assign(e,t.queryParam,{orderBy:"id desc"})).then((function(t){var e=t.data;return e}))},orgTree:[],selectedRowKeys:[],selectedRows:[]}},filters:{statusFilter:function(t){return l[t].text},statusTypeFilter:function(t){return l[t].status},levelFilter:function(t){return"number"!==typeof t?t:1===t?"一级":2===t?"二级":3===t?"三级":void 0},showTypeFilter:function(t){return"number"!==typeof t?t:0===t?"全部":1===t?"自定义":void 0}},methods:{onSelectChange:function(t,e){this.selectedRowKeys=t,this.selectedRows=e},getNotLoadType:function(){var t=this;Object(c["e"])().then((function(e){t.notTypeData=e}))},getNotOrgName:function(){var t=this;Object(c["f"])().then((function(e){t.notOrgName=e}))},handleOk:function(){this.$refs.table.refresh()},menuClick:function(t){this.$refs.detailModal.open(t)},onChange:function(){},deleteItem:function(t){var e=this.$message,n=this.handleOk;this.$confirm({title:"确定要删除此公告吗?",okText:"确定删除",okType:"danger",cancelText:"再想一想",onOk:function(){Object(c["b"])({id:t.id}).then((function(t){"ok"===t.state?(e.success("删除成功",2),n()):e.error("删除失败",2)}))},onCancel:function(){}})}}},u=d,f=(n("e1b1"),n("2877")),p=Object(f["a"])(u,a,o,!1,null,null,null);e["default"]=p.exports},e1b1:function(t,e,n){"use strict";n("5294")}}]);