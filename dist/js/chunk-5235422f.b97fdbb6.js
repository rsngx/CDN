(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5235422f"],{"00d8":function(e,t){(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],n=0;n<e.length;n+=3)for(var o=e[n]<<16|e[n+1]<<8|e[n+2],s=0;s<4;s++)8*n+6*s<=8*e.length?r.push(t.charAt(o>>>6*(3-s)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,o=0;n<e.length;o=++n%4)0!=o&&r.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<2*o|t.indexOf(e.charAt(n))>>>6-2*o);return r}};e.exports=r})()},"0187":function(e,t,r){"use strict";r.d(t,"e",(function(){return u})),r.d(t,"i",(function(){return i})),r.d(t,"a",(function(){return a})),r.d(t,"l",(function(){return c})),r.d(t,"m",(function(){return l})),r.d(t,"d",(function(){return d})),r.d(t,"c",(function(){return f})),r.d(t,"j",(function(){return h})),r.d(t,"h",(function(){return p})),r.d(t,"b",(function(){return b})),r.d(t,"f",(function(){return m})),r.d(t,"g",(function(){return y})),r.d(t,"k",(function(){return g}));var n=r("b775"),o={page:"/common/page/portal.t_sys_role",roleListAll:"/role/listAll",add:"/role/add",update:"/role/update",delete:"/role/delete",assignUsers:"/role/assignUsers",getUsers:"/role/getUsers",listAll:"/user/listAll",assignMenus:"/role/assignMenus",role:"/role"},s="role_id,role_name,create_date,create_by,remark,status,security";function u(e){return Object(n["b"])({url:o.roleListAll,method:"post",params:e})}function i(e){e.fields=s;var t=[];if(e.role_name){var r={col:"role_name"};r.value="%"+e.role_name+"%",r.opt="like",t.push(r)}if(e.status){var u={col:"status"};u.value=e.status,u.opt="=",t.push(u)}return t.length>0&&(e.wheres=JSON.stringify([t])),e.orderBy="create_date desc,role_id desc",Object(n["b"])({url:o.page,method:"post",params:e})}function a(e){return Object(n["b"])({url:o.add,method:"post",params:e})}function c(e){var t={role_name:e.role_name,status:e.status,security:e.security,remark:e.remark};e.set=JSON.stringify(t);var r=[];if(e.role_id){var s={col:"role_id"};s.value=e.role_id,s.opt="=",r.push(s)}return r.length>0&&(e.wheres=JSON.stringify(r)),Object(n["b"])({url:o.update,method:"post",params:e})}function l(e){var t={status:e.status};e.set=JSON.stringify(t);var r=[];if(e.role_id){var s={col:"role_id"};s.value=e.role_id,s.opt="=",r.push(s)}return r.length>0&&(e.wheres=JSON.stringify(r)),Object(n["b"])({url:o.update,method:"post",params:e})}function d(e){var t={role_id:e.role_id};return Object(n["b"])({url:o.delete,method:"post",params:t})}function f(e){return Object(n["b"])({url:o.assignUsers,method:"post",data:e})}function h(e){return Object(n["b"])({url:o.getUsers,method:"get",params:e})}function p(e){return Object(n["b"])({url:o.listAll,method:"get",params:e})}function b(e){return Object(n["b"])({url:o.assignMenus,method:"post",params:e})}function m(e){e.fields="menu_id";var t=[];if(e.role_id){var r={col:"role_id"};r.value=e.role_id,r.opt="=",t.push(r)}return t.length>0&&(e.wheres=JSON.stringify([t])),Object(n["b"])({url:"common/query/portal.t_sys_role_menu",method:"post",params:e})}function y(e){e.fields="id";var t=[];if(e.menu_name){var r={col:"status",value:1,opt:"="};t.push(r)}return t.length>0&&(e.wheres=JSON.stringify([t])),Object(n["b"])({url:"common/query/portal.t_sys_sub_system",method:"post",params:e})}function g(e){return Object(n["b"])({url:"role/isAllowDelete",method:"post",params:e})}},"044b":function(e,t){function r(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function n(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&r(e.slice(0,0))}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(r(e)||n(e)||!!e._isBuffer)}},"06c5":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("a630"),r("fb6a"),r("b0c0"),r("d3b7"),r("ac1f"),r("25f0"),r("3ca3");var n=r("6b75");function o(e,t){if(e){if("string"===typeof e)return Object(n["a"])(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(n["a"])(e,t):void 0}}},6821:function(e,t,r){(function(){var t=r("00d8"),n=r("9a634").utf8,o=r("044b"),s=r("9a634").bin,u=function(e,r){e.constructor==String?e=r&&"binary"===r.encoding?s.stringToBytes(e):n.stringToBytes(e):o(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var i=t.bytesToWords(e),a=8*e.length,c=1732584193,l=-271733879,d=-1732584194,f=271733878,h=0;h<i.length;h++)i[h]=16711935&(i[h]<<8|i[h]>>>24)|4278255360&(i[h]<<24|i[h]>>>8);i[a>>>5]|=128<<a%32,i[14+(a+64>>>9<<4)]=a;var p=u._ff,b=u._gg,m=u._hh,y=u._ii;for(h=0;h<i.length;h+=16){var g=c,v=l,_=d,w=f;c=p(c,l,d,f,i[h+0],7,-680876936),f=p(f,c,l,d,i[h+1],12,-389564586),d=p(d,f,c,l,i[h+2],17,606105819),l=p(l,d,f,c,i[h+3],22,-1044525330),c=p(c,l,d,f,i[h+4],7,-176418897),f=p(f,c,l,d,i[h+5],12,1200080426),d=p(d,f,c,l,i[h+6],17,-1473231341),l=p(l,d,f,c,i[h+7],22,-45705983),c=p(c,l,d,f,i[h+8],7,1770035416),f=p(f,c,l,d,i[h+9],12,-1958414417),d=p(d,f,c,l,i[h+10],17,-42063),l=p(l,d,f,c,i[h+11],22,-1990404162),c=p(c,l,d,f,i[h+12],7,1804603682),f=p(f,c,l,d,i[h+13],12,-40341101),d=p(d,f,c,l,i[h+14],17,-1502002290),l=p(l,d,f,c,i[h+15],22,1236535329),c=b(c,l,d,f,i[h+1],5,-165796510),f=b(f,c,l,d,i[h+6],9,-1069501632),d=b(d,f,c,l,i[h+11],14,643717713),l=b(l,d,f,c,i[h+0],20,-373897302),c=b(c,l,d,f,i[h+5],5,-701558691),f=b(f,c,l,d,i[h+10],9,38016083),d=b(d,f,c,l,i[h+15],14,-660478335),l=b(l,d,f,c,i[h+4],20,-405537848),c=b(c,l,d,f,i[h+9],5,568446438),f=b(f,c,l,d,i[h+14],9,-1019803690),d=b(d,f,c,l,i[h+3],14,-187363961),l=b(l,d,f,c,i[h+8],20,1163531501),c=b(c,l,d,f,i[h+13],5,-1444681467),f=b(f,c,l,d,i[h+2],9,-51403784),d=b(d,f,c,l,i[h+7],14,1735328473),l=b(l,d,f,c,i[h+12],20,-1926607734),c=m(c,l,d,f,i[h+5],4,-378558),f=m(f,c,l,d,i[h+8],11,-2022574463),d=m(d,f,c,l,i[h+11],16,1839030562),l=m(l,d,f,c,i[h+14],23,-35309556),c=m(c,l,d,f,i[h+1],4,-1530992060),f=m(f,c,l,d,i[h+4],11,1272893353),d=m(d,f,c,l,i[h+7],16,-155497632),l=m(l,d,f,c,i[h+10],23,-1094730640),c=m(c,l,d,f,i[h+13],4,681279174),f=m(f,c,l,d,i[h+0],11,-358537222),d=m(d,f,c,l,i[h+3],16,-722521979),l=m(l,d,f,c,i[h+6],23,76029189),c=m(c,l,d,f,i[h+9],4,-640364487),f=m(f,c,l,d,i[h+12],11,-421815835),d=m(d,f,c,l,i[h+15],16,530742520),l=m(l,d,f,c,i[h+2],23,-995338651),c=y(c,l,d,f,i[h+0],6,-198630844),f=y(f,c,l,d,i[h+7],10,1126891415),d=y(d,f,c,l,i[h+14],15,-1416354905),l=y(l,d,f,c,i[h+5],21,-57434055),c=y(c,l,d,f,i[h+12],6,1700485571),f=y(f,c,l,d,i[h+3],10,-1894986606),d=y(d,f,c,l,i[h+10],15,-1051523),l=y(l,d,f,c,i[h+1],21,-2054922799),c=y(c,l,d,f,i[h+8],6,1873313359),f=y(f,c,l,d,i[h+15],10,-30611744),d=y(d,f,c,l,i[h+6],15,-1560198380),l=y(l,d,f,c,i[h+13],21,1309151649),c=y(c,l,d,f,i[h+4],6,-145523070),f=y(f,c,l,d,i[h+11],10,-1120210379),d=y(d,f,c,l,i[h+2],15,718787259),l=y(l,d,f,c,i[h+9],21,-343485551),c=c+g>>>0,l=l+v>>>0,d=d+_>>>0,f=f+w>>>0}return t.endian([c,l,d,f])};u._ff=function(e,t,r,n,o,s,u){var i=e+(t&r|~t&n)+(o>>>0)+u;return(i<<s|i>>>32-s)+t},u._gg=function(e,t,r,n,o,s,u){var i=e+(t&n|r&~n)+(o>>>0)+u;return(i<<s|i>>>32-s)+t},u._hh=function(e,t,r,n,o,s,u){var i=e+(t^r^n)+(o>>>0)+u;return(i<<s|i>>>32-s)+t},u._ii=function(e,t,r,n,o,s,u){var i=e+(r^(t|~n))+(o>>>0)+u;return(i<<s|i>>>32-s)+t},u._blocksize=16,u._digestsize=16,e.exports=function(e,r){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var n=t.wordsToBytes(u(e,r));return r&&r.asBytes?n:r&&r.asString?s.bytesToString(n):t.bytesToHex(n)}})()},6932:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("s-table",{ref:"table",attrs:{size:"default",rowKey:"key",columns:e.columns,data:e.loadData,alert:e.alert,rowSelection:e.rowSelection,showPagination:"auto"}})],1)],1)},o=[],s=r("5530"),u=r("b85c"),i=(r("d81d"),r("a9e3"),r("b64b"),r("d3b7"),r("25f0"),r("2af9")),a=r("0187"),c=r("8930"),l={name:"UserRole",components:{STable:i["b"]},props:{userRoleKey:{type:Number},checkedKeys:{type:Array,default:function(){return[]}}},data:function(){var e=this;return{columns:[{title:"角色ID",dataIndex:"role_id"},{title:"角色名称",dataIndex:"role_name"}],recordList:[],visible:!1,title:"",user_id:this.userRoleKey,confirmLoading:!1,selectedRowKeys:this.checkedKeys,selectedRows:[],alert:{show:!0,clear:function(){e.$refs.table.updateSelect([],[])}},rowSelection:{selectedRowKeys:this.selectedRowKeys,selectedRows:this.selectedRows,onChange:this.onSelectChange},optionAlertShow:!1}},created:function(){var e={pageNo:1,pageSize:10};this.loadData(e)},updated:function(){this.$refs.table.updateSelect(this.selectedRowKeys,this.selectedRows)},methods:{loadData:function(e){var t=this;return this.selectedRows=[],Object(a["i"])(Object.assign(e,{status:1})).then((function(e){var r,n=Object(u["a"])(e.result.data);try{for(n.s();!(r=n.n()).done;){var o=r.value;o.key=o.role_id;var i=t.selectedRowKeys.indexOf(o.role_id)>-1;i&&t.selectedRows.push(o)}}catch(a){n.e(a)}finally{n.f()}return t.recordList=e.result.data.map((function(e){return Object(s["a"])(Object(s["a"])({},e),{},{key:e.role_id})})),t.title="配置用户角色",t.visible=!0,e.result}))},add:function(e,t){this.user_id=e.user_id},getCheckedKeys:function(e){var t=this;return this.checkedKeys=[],Object(c["e"])(e).then((function(e){if(e.result){var r,n=JSON.parse(e.result),o=Object(u["a"])(n);try{for(o.s();!(r=o.n()).done;){var s=r.value;t.checkedKeys.push(s.role_id.toString())}}catch(i){o.e(i)}finally{o.f()}}t.selectedRowKeys=t.checkedKeys,t.rowSelection.selectedRowKeys=t.checkedKeys}))},onCheck:function(e){this.checkedKeys=e},getCheckboxProps:function(e){var t=this.selectedRowKeys.indexOf(e.role_id)>-1;return t&&this.selectedRows.push(e),{props:{defaultChecked:t}}},onSelectChange:function(e,t){this.selectedRows=t,this.selectedRowKeys=e,this.selectedRoleIds=[],this.selectedRoleIds.push(e)},handleSubmit:function(e){var t=this;e.preventDefault();var r={};return r.user_id=this.user_id,r.roles=this.selectedRowKeys,Object(c["b"])(Object.assign(r)).then((function(e){"ok"===e.state?(t.visible=!1,t.$emit("ok",r)):t.$error({title:"错误提示",content:e.msg})}))},handleCancel:function(){this.visible=!1}}},d=l,f=r("2877"),h=Object(f["a"])(d,n,o,!1,null,"6d188dc6",null);t["default"]=h.exports},"6b75":function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,"a",(function(){return n}))},8930:function(e,t,r){"use strict";r.d(t,"h",(function(){return a})),r.d(t,"a",(function(){return c})),r.d(t,"i",(function(){return l})),r.d(t,"k",(function(){return d})),r.d(t,"j",(function(){return f})),r.d(t,"d",(function(){return h})),r.d(t,"f",(function(){return p})),r.d(t,"b",(function(){return b})),r.d(t,"g",(function(){return m})),r.d(t,"e",(function(){return y}));var n=r("b775"),o=r("6821"),s=r.n(o),u={update:"/user/resetPassword",updateUser:"/user/update",delete:"/user/delete",role:"/role",downTemplate:"/user/exportTemplate"},i="user_id,account,passwd,user_name,sex,cities,dept_id,email,mobile,status,expired_date,create_date,create_by";function a(e){e.fields=i;var t=[];if(e.dept_id){var r={col:"dept_id"};r.value=e.dept_id,r.opt="=",t.push(r)}if(e.user_name){var o={col:"user_name"};o.value=e.user_name,o.opt="=",t.push(o)}if(e.status){var s={col:"status"};s.value=e.status,s.opt="=",t.push(s)}return t.length>0&&(e.wheres=JSON.stringify([t])),e.orderBy="create_date desc,role_id desc",Object(n["b"])({url:"/user/page",method:"post",params:e})}function c(e){return Object(n["b"])({url:"user/add",method:"post",params:e})}function l(e){return Object(n["b"])({url:u.updateUser,method:"post",params:e})}function d(e){return Object(n["b"])({url:u.update,method:"post",params:e})}function f(e){var t={passwd:s()("1qaz!QAZ")};e.set=JSON.stringify(t);var r=[];if(e.user_id){var o={col:"user_id"};o.value=e.user_id,o.opt="=",r.push(o)}return r.length>0&&(e.wheres=JSON.stringify(r)),Object(n["b"])({url:u.update,method:"post",params:e})}function h(e){return Object(n["b"])({url:u.delete,method:"post",params:e})}function p(e){return Object(n["b"])({url:"user/getCities",method:"get",params:e})}function b(e){return Object(n["b"])({url:"user/assignRoles",method:"post",params:e})}function m(e){return Object(n["b"])({url:"user/role",method:"post",params:e})}function y(e){e.fields="role_id";var t=[];if(e.user_id){var r={col:"user_id"};r.value=e.user_id,r.opt="=",t.push(r)}return t.length>0&&(e.wheres=JSON.stringify([t])),Object(n["b"])({url:"common/query/portal.t_sys_role_user",method:"post",params:e})}t["c"]=u},"9a634":function(e,t){var r={utf8:{stringToBytes:function(e){return r.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(r.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=r},b85c:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("a4d3"),r("e01a"),r("d28b"),r("d3b7"),r("3ca3"),r("ddb0");var n=r("06c5");function o(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Object(n["a"])(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var o=0,s=function(){};return{s:s,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,i=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,u=e},f:function(){try{i||null==r["return"]||r["return"]()}finally{if(a)throw u}}}}}}]);