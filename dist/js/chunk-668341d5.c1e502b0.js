(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-668341d5"],{"631d":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleCancel,cancel:e.handleCancel}},[t("a-form",{attrs:{form:e.form}},[t("a-row",{staticClass:"form-row",attrs:{gutter:16}},[t("a-col",{staticStyle:{"min-height":"400px","max-height":"400px",overflow:"auto"},attrs:{span:12}},[t("div",{staticClass:"box-header"},[t("div",{staticClass:"box-title"},[t("i",{staticClass:"fa icon-grid"}),e._v(" 所属角色 ")]),t("div",{staticClass:"box-tools pull-right"})]),e.roleTree.length?t("a-tree",{ref:"systems",attrs:{showLine:"",defaultExpandAll:"",treeData:e.roleTree,defaultExpandParent:""},on:{select:e.onSelect},scopedSlots:e._u([{key:"custom",fn:function(e){var n=e.selected;return[t("a-icon",{attrs:{type:n?"frown":"frown-o"}})]}}],null,!1,3196988677)},[t("a-icon",{attrs:{slot:"switcherIcon",type:"down"},slot:"switcherIcon"}),t("a-icon",{attrs:{slot:"smile",type:"smile-o"},slot:"smile"}),t("a-icon",{attrs:{slot:"meh",type:"smile-o"},slot:"meh"})],1):e._e()],1),t("a-col",{staticStyle:{"border-left":"1px solid #eee","padding-left":"20px","min-height":"400px","max-height":"400px",overflow:"auto"},attrs:{span:12}},[t("a-spin",{attrs:{spinning:e.loading}},[t("a-form-item",{attrs:{label:"角色对应菜单权限"}},[e.treeData.length?t("a-tree",{ref:"menuTree",attrs:{treeDefaultExpandAll:"",defaultExpandAll:"",expandedKeys:e.expandedKeys,autoExpandParent:e.autoExpandParent,treeData:e.treeData},on:{expand:e.onExpand}}):t("a-empty")],1)],1)],1)],1)],1)],1)},s=[],r=n("5530"),a=(n("d3b7"),n("159b"),n("e37e")),o={name:"PermissionForm",data:function(){return{form:this.$form.createForm(this),confirmLoading:!1,visible:!1,loading:!1,title:"",systemTree:[],system_id:0,expandedKeys:[],autoExpandParent:!0,commitCheckedKeys:[],treeData:[],roleTree:[]}},methods:{open:function(e){this.visible=!0,this.user_id=e.user_id;var t=e.dept_role?e.dept_role+",":"",n=(t+e.special_role).split(","),i=[];n.forEach((function(e,t){var n={};n.title=e,n.key=t,i.push(n)})),this.roleTree=[{title:"全部角色",key:"allRole",children:i}]},menuTree:function(e){var t=this;return this.loading=!0,e.user_id?Object(a["b"])(e).then((function(e){t.handleRes(e)})):Object(a["a"])(e).then((function(e){t.handleRes(e)}))},handleRes:function(e){var t=[],n={},i=[];this.listToTree(e.result,t,0),t.forEach((function(e){n=Object(r["a"])({},e),i.push(n)})),this.treeData=i,this.loading=!1},listToTree:function(e,t,n){var i=this;e.forEach((function(s){if(s.parent_id===n){var a=Object(r["a"])(Object(r["a"])({},s),{},{key:s.menu_id,title:s.menu_name,children:[]});i.listToTree(e,a.children,s.menu_id),a.children.length<=0&&delete a.children,t.push(a)}}))},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},onSelect:function(e,t){var n=t.node.title;"全部角色"===n?this.menuTree({user_id:this.user_id}):this.menuTree({role_name:n})},handleCancel:function(){this.visible=!1}}},l=o,c=n("2877"),d=Object(c["a"])(l,i,s,!1,null,"579f1974",null);t["default"]=d.exports},e37e:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var i=n("b775"),s={getPermissionRoleList:"permission/role",getPermissionMenuListByUser:"permission/menuByUser",getPermissionMenuListByRole:"permission/menuByRole"};function r(e){return Object(i["b"])({url:s.getPermissionRoleList,method:"get",params:e})}function a(e){return Object(i["b"])({url:s.getPermissionMenuListByUser,method:"get",params:e})}function o(e){return Object(i["b"])({url:s.getPermissionMenuListByRole,method:"get",params:e})}}}]);