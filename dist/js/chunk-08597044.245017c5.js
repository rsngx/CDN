(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08597044"],{"06c5":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("a630"),n("fb6a"),n("b0c0"),n("d3b7"),n("ac1f"),n("25f0"),n("3ca3");var a=n("6b75");function i(t,e){if(t){if("string"===typeof t)return Object(a["a"])(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(a["a"])(t,e):void 0}}},2909:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var a=n("6b75");function i(t){if(Array.isArray(t))return Object(a["a"])(t)}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("d3b7"),n("3ca3"),n("ddb0");function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var s=n("06c5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return i(t)||r(t)||Object(s["a"])(t)||o()}},"3d7f":function(t,e,n){},5100:function(t,e,n){},"6b75":function(t,e,n){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}n.d(e,"a",(function(){return a}))},"6fd7":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("a-spin",{attrs:{spinning:t.spinning}},[e("a-card",{attrs:{bordered:!1}},[e("a-row",{attrs:{gutter:8}},[e("a-col",{attrs:{span:24}},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:48}},[e("a-col",{attrs:{md:8,sm:24}},[e("a-form-item",{attrs:{label:"菜单名称"}},[e("a-input",{attrs:{placeholder:""},model:{value:t.queryParam.sch_LIKE_menu_name,callback:function(e){t.$set(t.queryParam,"sch_LIKE_menu_name",e)},expression:"queryParam.sch_LIKE_menu_name"}})],1)],1),e("a-col",{attrs:{md:8,sm:24}},[e("a-form-item",{attrs:{label:"是否启用"}},[e("a-select",{attrs:{placeholder:"请选择","default-value":"0"},model:{value:t.queryParam.sch_EQ_status,callback:function(e){t.$set(t.queryParam,"sch_EQ_status",e)},expression:"queryParam.sch_EQ_status"}},[e("a-select-option",{attrs:{value:""}},[t._v("全部")]),e("a-select-option",{attrs:{value:"1"}},[t._v("启用")]),e("a-select-option",{attrs:{value:"0"}},[t._v("禁用")])],1)],1)],1),e("a-col",{attrs:{md:t.advanced?24:8,sm:24}},[e("span",{staticClass:"table-page-search-submitButtons",style:t.advanced&&{float:"right",overflow:"hidden"}||{}},[e("a-button",{attrs:{type:"primary"},on:{click:t.queryMenuTree}},[t._v("查询")]),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return t.queryParam={}}}},[t._v("重置")]),t.$auth("sys:menu:add")?e("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:function(e){return t.handleAdd({},!1)}}},[t._v("添加")]):t._e()],1)])],1)],1)],1),e("a-spin",{attrs:{spinning:t.loading}},[e("a-table",{ref:"table",attrs:{scroll:{x:1900},size:"default",columns:t.columns,dataSource:t.menuTree,defaultExpandAllRows:t.isExpand},scopedSlots:t._u([{key:"status",fn:function(n){return e("span",{},[e("a-badge",{attrs:{status:t._f("statusTypeFilter")(n),text:t._f("statusFilter")(n)}})],1)}},{key:"clazz",fn:function(n){return e("span",{},[e("a-badge",{attrs:{status:t._f("clazzTypeFilter")(n),text:t._f("clazzFilter")(n)}})],1)}},{key:"action",fn:function(n,a){return e("span",{},[[t.$auth("sys:menu:update")?e("a",{staticStyle:{color:"#52c41a"},on:{click:function(e){return t.handleEdit(a)}}},[t._v("编辑")]):t._e(),a.has_children?t._e():e("a-divider",{attrs:{type:"vertical"}}),t.$auth("sys:menu:delete")&&!a.has_children?e("a",{staticStyle:{color:"red"},on:{click:function(e){return t.handleDelete(a)}}},[t._v("删除")]):t._e(),e("a-divider",{attrs:{type:"vertical"}})],e("a-dropdown",[e("a",{staticClass:"ant-dropdown-link"},[t._v(" 更多 "),e("a-icon",{attrs:{type:"down"}})],1),e("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[1===a.status?e("a-menu-item",["2"==a.clazz?e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.handleStatus(a,!1)}}},[t._v("禁用")]):t._e()]):e("a-menu-item",["2"==a.clazz?e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.handleStatus(a,!0)}}},[t._v("启用")]):t._e()]),t.$auth("sys:menu:add")&&"2"!=a.clazz?e("a-menu-item",[e("a",{on:{click:function(e){return t.handleAdd(a,!0)}}},[t._v("增加")])]):t._e(),t.$auth("sys:menu:update")&&"1"==a.clazz&&a.has_children?e("a-menu-item",[e("a",{on:{click:function(e){return t.handleSort(a)}}},[t._v("子菜单排序")])]):t._e()],1)],1)],2)}}])})],1)],1)],1),e("menu-form",{ref:"createModal",attrs:{systemTree:t.systemTree,isSubMenu:t.isSubMenu},on:{ok:t.handleOk}}),e("menu-sort",{ref:"menuSort",attrs:{subMenus:t.subMenus},on:{ok:t.handleMenuSortOk}})],1)],1)},i=[],r=n("c32d"),s=n.n(r),o=n("2af9"),u=n("b90e"),c=n("e37f"),l=n("5b64"),d=[{title:"Nokia",key:"0",slots:{icon:"smile"},children:[{title:"子系统1",key:"1",slots:{icon:"meh"}},{title:"子系统2",key:"2",scopedSlots:{icon:"custom"}}]}],f={onChange:function(t,e){},onSelect:function(t,e,n){},onSelectAll:function(t,e,n){}},h={0:{status:"default",text:"禁用"},1:{status:"processing",text:"启用"}},m={1:{clazz:"error",text:"目录"},2:{clazz:"processing",text:"模块"},3:{clazz:"warning",text:"按钮"}},b={name:"MenuList",components:{MenuSort:c["default"],STable:o["l"],Ellipsis:o["c"],MenuForm:u["default"]},data:function(){var t=this;return{spinning:!0,treeData:d,rowSelection:f,loading:!1,mdl:{},advanced:!1,queryParam:{},menuTree:[],systemTree:[],system_id:"0",isExpand:!0,subMenus:[],isSubMenu:!1,columns:[{title:"菜单名称",dataIndex:"menu_name",width:"220px"},{title:"所属菜单",dataIndex:"parent_name",width:"150px"},{title:"URL",dataIndex:"menu_url",width:"300px"},{title:"对应组件",dataIndex:"component",width:"200px"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"},width:"100px"},{title:"类别",dataIndex:"clazz",scopedSlots:{customRender:"clazz"},width:"100px"},{title:"图标样式",dataIndex:"style",width:"150px"},{title:"操作",dataIndex:"action",width:"180px",scopedSlots:{customRender:"action"}}],loadData:function(e){return Object(l["d"])(Object.assign(e,t.queryParam)).then((function(t){return t.result}))}}},filters:{statusFilter:function(t){return h[t].text},statusTypeFilter:function(t){return h[t].status},clazzFilter:function(t){return m[t].text},clazzTypeFilter:function(t){return m[t].clazz}},mounted:function(){this.getSystems()},methods:{getSystems:function(){var t=this;Object(l["g"])().then((function(e){t.systemTree=e,t.spinning=!1,t.getMenuTree({t:new Date,system_id:t.system_id})}))},getMenuTree:function(t){var e=this;this.loading=!0,Object(l["e"])(t).then((function(t){e.menuTree=t,e.loading=!1}))},queryMenuTree:function(t){var e=this;this.loading=!0,Object(l["h"])(Object.assign(this.queryParam,{system_id:this.system_id})).then((function(t){e.menuTree=t,e.loading=!1}))},tableOption:function(){var t=this;this.optionAlertShow?(this.options={alert:!1,rowSelection:null},this.optionAlertShow=!1):(this.options={alert:{show:!0,clear:function(){t.selectedRowKeys=[]}},rowSelection:{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange,getCheckboxProps:function(t){return{props:{disabled:"No 2"===t.no,name:t.no}}}}},this.optionAlertShow=!0)},handleAdd:function(t,e){this.isSubMenu=e,this.$refs.createModal.add(t,t.system_id?t.system_id:this.system_id,t.system_name?t.system_name:this.system_name)},handleEdit:function(t){0===t.parent_id?this.isSubMenu=!1:this.isSubMenu=!0,this.$refs.createModal.edit(t)},handleStatus:function(t,e){var n=this;return t.status=e?"1":"0",Object(l["k"])(Object.assign(t)).then((function(t){"ok"===t.state?(n.visible=!1,n.handleOk()):n.$error({title:"错误提示",content:t.msg})}))},handleDelete:function(t){var e=this;e.$confirm({centered:!0,title:"信息提示",content:"你确定要删除菜单【"+t.menu_name+"】吗？",onOk:function(){return Object(l["b"])(Object.assign(t)).then((function(t){"ok"===t.state?e.handleOk():e.$error({title:"错误提示",content:t.msg})}))},onCancel:function(){return!1}})},handleSort1:function(t){this.getSubMenus(t),this.$refs.menuSort.add(t)},handleSort:function(t){var e=this;return Object(l["f"])({parent_id:t.menu_id}).then((function(n){e.subMenus=n,e.$refs.menuSort.add(t.menu_id,e.subMenus)}))},handleOk:function(t){this.$success({centered:!0,title:"信息提示",content:"操作成功"}),this.getMenuTree({t:new Date,system_id:this.system_id})},handleMenuSortOk:function(t){this.$success({centered:!0,title:"信息提示",content:"操作成功"})},onSelectChange:function(t,e){this.selectedRowKeys=t,this.selectedRows=e},onSelect:function(t,e){e.selectedNodes.length>0?this.system_id=t[0]:this.system_id="0","所有系统"===e.node.title?this.system_name="":this.system_name=e.node.title,this.getMenuTree({system_id:this.system_id})},toggleAdvanced:function(){this.advanced=!this.advanced},resetSearchForm:function(){this.queryParam={date:s()(new Date)}}}},p=b,_=(n("aa0f"),n("2877")),y=Object(_["a"])(p,a,i,!1,null,null,null);e["default"]=y.exports},aa0f:function(t,e,n){"use strict";n("5100")},b85c:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("a4d3"),n("e01a"),n("d28b"),n("d3b7"),n("3ca3"),n("ddb0");var a=n("06c5");function i(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Object(a["a"])(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){u=!0,s=t},f:function(){try{o||null==n["return"]||n["return"]()}finally{if(u)throw s}}}}},e37f:function(t,e,n){"use strict";n.r(e);for(var a=function(){var t=this,e=t._self._c;return e("div",[e("a-modal",{attrs:{title:t.title,width:800,visible:t.visible,confirmLoading:t.confirmLoading},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[e("a-card",{attrs:{bordered:!1}},[e("a-table",{ref:"table",attrs:{pagination:!1,columns:t.columns,dataSource:t.data,bordered:""},scopedSlots:t._u([t._l(["sort_no"],(function(n){return{key:n,fn:function(a,i){return[e("div",{key:n},[i.editable?e("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:a},on:{change:function(e){return t.handleChange(e,i.menu_id,n)}}}):t._e()],1)]}}}))],null,!0)})],1)],1)],1)},i=[],r=n("b85c"),s=n("2909"),o=n("5530"),u=(n("4de4"),n("d81d"),n("d3b7"),n("25f0"),n("159b"),n("5b64")),c=[{title:"菜单名称",dataIndex:"menu_name",width:"25%",scopedSlots:{customRender:"menu_name"}},{title:"URL",dataIndex:"menu_url",width:"40%",scopedSlots:{customRender:"menu_url"}},{title:"排序",dataIndex:"sort_no",width:"15%",editable:!0,scopedSlots:{customRender:"sort_no"}}],l=[],d=0;d<3;d++)l.push({menu_id:d.toString(),menu_name:"Edrward ".concat(d),sort_no:d,editable:!0,menu_url:"London Park no. ".concat(d)});var f={name:"MenuSort",data:function(){return this.cacheData=l.map((function(t){return Object(o["a"])({},t)})),{form:this.$form.createForm(this),parent_id:this.parent_id,confirmLoading:!1,visible:!1,title:"",data:l,columns:c}},watch:{},created:function(){this.loadData({when:"created",parent_id:this.parent_id})},mounted:function(){var t=this;this.$on("subMenus",(function(e){t.data=e})),this.loadData({when:"mounted",parent_id:this.parent_id})},methods:{loadData:function(t){return Object(u["f"])(Object.assign(t)).then((function(t){}))},add:function(t,e){e.forEach((function(t){t.editable=!0})),this.data=e,this.title="子菜单排序",this.visible=!0,this.parent_id=t},handleChange:function(t,e,n){var a=t.target.value,i=Object(s["a"])(this.data),r=i.filter((function(t){return e===t.menu_id}))[0];r&&(r[n]=a,this.data=i)},edit:function(t){var e=Object(s["a"])(this.data),n=e.filter((function(e){return t===e.menu_id}))[0];n&&(n.editable=!0,this.data=e)},save:function(t){var e=Object(s["a"])(this.data),n=e.filter((function(e){return t===e.menu_id}))[0];n&&(delete n.editable,this.data=e,this.cacheData=e.map((function(t){return Object(o["a"])({},t)})))},cancel:function(t){var e=Object(s["a"])(this.data),n=e.filter((function(e){return t===e.menu_id}))[0];n&&(Object.assign(n,this.cacheData.filter((function(e){return t===e.menu_id}))[0]),delete n.editable,this.data=e)},handleSubmit:function(t){var e=this;t.preventDefault();var n,a=[],i=Object(r["a"])(this.data);try{for(i.s();!(n=i.n()).done;){var s=n.value;a.push({menu_id:s.menu_id,sort_no:s.sort_no})}}catch(o){i.e(o)}finally{i.f()}Object(u["j"])({menuList:a}).then((function(t){"ok"===t.state?(e.visible=!1,e.$emit("ok",a)):e.$error({title:"错误提示",content:t.msg})}))},handleCancel:function(){this.visible=!1}}},h=f,m=(n("e468"),n("2877")),b=Object(m["a"])(h,a,i,!1,null,"e9069150",null);e["default"]=b.exports},e468:function(t,e,n){"use strict";n("3d7f")}}]);