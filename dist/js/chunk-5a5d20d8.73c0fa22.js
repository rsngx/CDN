(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a5d20d8"],{"2a6b":function(t,a,e){"use strict";e("4de6")},"41fd":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t._self._c;return a("div",{staticClass:"page-header-index-wide"},[a("a-card",{attrs:{bordered:!1,"body-style":{padding:"10"}}},[a("div",{staticClass:"salesCard"},[a("a-tabs",{attrs:{"tab-bar-style":{marginBottom:"24px",paddingLeft:"20px"}}},[a("div",{staticClass:"extra-wrapper",attrs:{slot:"tabBarExtraContent"},slot:"tabBarExtraContent"},[a("div",{staticClass:"extra-item"},[a("a-button",{attrs:{type:"link"},on:{click:function(a){return t.getBarData("days")}}},[t._v("七天")]),a("a-button",{attrs:{type:"link"},on:{click:function(a){return t.getBarData("month")}}},[t._v("本月")]),a("a-button",{attrs:{type:"link"},on:{click:function(a){return t.getBarData("year")}}},[t._v("本年")])],1),a("a-range-picker",{style:{width:"256px"},attrs:{disabledDate:t.disabledDate},on:{change:t.onChange}})],1),a("a-tab-pane",{key:"1",attrs:{tab:"访问量统计"}},[a("a-row",{staticStyle:{display:"flex"}},[a("a-col",{attrs:{xl:16,lg:12,md:12,sm:24,xs:24}},[a("EBar",{attrs:{sData:t.sData,xData:t.xData,title:t.barTitle}})],1),a("a-col",{attrs:{xl:8,lg:12,md:12,sm:24,xs:24}},[a("chart-card",{attrs:{title:"今日访问人数",total:t.logInfo.todayUsers}},[a("a-tooltip",{attrs:{slot:"action",title:"同一人多次登录记为一次"},slot:"action"},[a("a-icon",{attrs:{type:"info-circle-o"}})],1),a("div",[a("trend",{staticStyle:{"margin-right":"16px"},attrs:{flag:t.logInfo.dayTrendNum>=0?"up":"down"}},[a("span",{attrs:{slot:"term"},slot:"term"},[t._v("日同比")]),t._v(" "+t._s(t.logInfo.dayTrendUser)+"% ")]),a("trend",{attrs:{flag:t.logInfo.dayTrendNum>=0?"up":"down"}},[a("span",{attrs:{slot:"term"},slot:"term"},[t._v("月同比")]),t._v(" "+t._s(t.logInfo.monthTrendUser)+"% ")])],1),a("template",{slot:"footer"},[t._v("总访问人数"),a("span",[t._v(t._s(t.logInfo.totalUsers))])])],2),a("chart-card",{attrs:{title:"今日访问量",total:t.logInfo.todayNums}},[a("div",[a("trend",{staticStyle:{"margin-right":"16px"},attrs:{flag:t.logInfo.dayTrendNum>=0?"up":"down"}},[a("span",{attrs:{slot:"term"},slot:"term"},[t._v("日同比")]),t._v(" "+t._s(t.logInfo.dayTrendNum)+"% ")]),a("trend",{attrs:{flag:t.logInfo.dayTrendNum>=0?"up":"down"}},[a("span",{attrs:{slot:"term"},slot:"term"},[t._v("月同比")]),t._v(" "+t._s(t.logInfo.monthTrendNum)+"% ")])],1),a("template",{slot:"footer"},[t._v("总访问量"),a("span",[t._v(t._s(t.logInfo.totalNums))])])],2)],1)],1)],1)],1)],1)]),a("div",{staticClass:"antd-pro-pages-dashboard-analysis-twoColLayout",class:t.isDesktop()?"desktop":""},[a("a-row",{style:{marginTop:"24px"},attrs:{gutter:24,type:"flex"}},[a("a-col",{attrs:{xl:16,lg:24,md:24,sm:24,xs:24}},[a("a-card",{style:{height:"100%"},attrs:{bordered:!1,title:"访问详情"}},[a("a-row",{attrs:{gutter:68}},[a("a-col",{style:{marginBottom:" 24px"},attrs:{xs:24,sm:12}},[a("number-info",{attrs:{total:t.logInfo.todayNums,"sub-total":t.logInfo.dayDiffNum,status:t.logInfo.dayDiffNum>=0?"up":"down"}},[a("span",{attrs:{slot:"subtitle"},slot:"subtitle"},[a("span",[t._v("今日访问量")]),a("a-tooltip",{attrs:{slot:"action",title:"今日访问量及相比昨日差值"},slot:"action"},[a("a-icon",{style:{marginLeft:"8px"},attrs:{type:"info-circle-o"}})],1)],1)]),a("div",[a("mini-smooth-area",{style:{height:"45px"},attrs:{dataSource:t.accessUsersData,scale:t.searchUserScale}})],1)],1),a("a-col",{style:{marginBottom:" 24px"},attrs:{xs:24,sm:12}},[a("number-info",{attrs:{total:t.logInfo.todayUsers,"sub-total":t.logInfo.dayDiffUser,status:t.logInfo.dayDiffNum>=0?"up":"down"}},[a("span",{attrs:{slot:"subtitle"},slot:"subtitle"},[a("span",[t._v("今日访问人数")]),a("a-tooltip",{attrs:{slot:"action",title:"今日访问人数及相比昨日差值"},slot:"action"},[a("a-icon",{style:{marginLeft:"8px"},attrs:{type:"info-circle-o"}})],1)],1)]),a("div",[a("mini-smooth-area",{style:{height:"45px"},attrs:{dataSource:t.accessLoginData,scale:t.loginUserScale}})],1)],1)],1),a("div",{staticClass:"ant-table-wrapper"},[a("a-table",{ref:"table",attrs:{size:"default",columns:t.searchTableColumns,pagination:t.pagination,dataSource:t.data,rowKey:function(t,a){return a}},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"range",fn:function(e,n){return a("span",{},[a("trend",{attrs:{flag:0===n.status?"up":"down"}},[t._v(" "+t._s(e)+"% ")])],1)}}])})],1)],1)],1),a("a-col",{attrs:{xl:8,lg:24,md:24,sm:24,xs:24}},[a("a-card",{attrs:{bordered:!1,"body-style":{padding:"10"}}},[a("a-tabs",{attrs:{"tab-bar-style":{marginBottom:"24px",paddingLeft:"20px"}}},[a("a-tab-pane",{key:"1",attrs:{tab:"用户登录次数排行"}},[a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(t,a){return a},columns:t.loginColumns,data:t.loadLoginRank,showPagination:"auto"}})],1),a("a-tab-pane",{key:"2",attrs:{tab:"菜单访问次数排行"}},[a("s-table",{ref:"table",attrs:{size:"default",rowKey:function(t,a){return a},columns:t.accessMenuColumns,data:t.loadAccessMenuRank,showPagination:"auto"}})],1)],1)],1)],1)],1)],1)],1)},s=[],o=e("5530"),r=(e("d81d"),e("c32d")),i=e.n(r),l=e("2af9"),d=e("ac0d"),c=e("b775");function u(t){return Object(c["b"])({url:"/loginLog/getBarData",method:"get",params:t})}var f=[{dataKey:"x",alias:"时间"},{dataKey:"y",alias:"访问量"}],g=[{dataKey:"x",alias:"时间"},{dataKey:"y",alias:"访问人数"}],p=[{dataIndex:"user_name",title:"用户名"},{dataIndex:"login_date",title:"登录时间"},{dataIndex:"ip",title:"IP"}],m=[],h={name:"Analysis",mixins:[d["c"]],components:{STable:l["l"],ChartCard:l["a"],MiniArea:l["e"],MiniBar:l["f"],MiniProgress:l["g"],RankList:l["j"],EBar:l["b"],Trend:l["m"],NumberInfo:l["i"],MiniSmoothArea:l["h"]},data:function(){return{rankList:[],logInfo:{avgNums:0,todayNums:0,todayUsers:0,dayDiffUser:0,dayDiffNum:0},loginRank:[],accessMenuRank:[],data:[],pagination:{},accessUsersData:[],accessLoginData:[],searchUserScale:f,loginUserScale:g,searchTableColumns:p,searchData:m,loginColumns:[{title:"用户名称",dataIndex:"name",key:"name"},{title:"登录次数",dataIndex:"total"}],accessMenuColumns:[{title:"菜单名称",dataIndex:"name",key:"name"},{title:"访问次数",dataIndex:"total"}],barTitle:"访问量排行",barData:[],loadLoginRank:function(t){return(void 0)(t).then((function(t){return t}))},loadAccessMenuRank:function(t){return(void 0)(t).then((function(t){return t}))}}},computed:{sData:function(){return this.barData.map((function(t){return t.y}))},xData:function(){return this.barData.map((function(t){return t.x}))}},methods:{getLogInfo:function(){var t=this;(void 0)().then((function(a){t.logInfo=a}))},handleTableChange:function(t,a,e){var n=Object(o["a"])({},this.pagination);n.current=t.current,this.pagination=n,this.fetch(Object(o["a"])({results:t.pageSize,page:t.current},a))},fetch:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object(o["a"])({result:10},a);(void 0)(e).then((function(a){var e=Object(o["a"])({},t.pagination);e.total=a.totalCount,t.data=a.data,t.pagination=e}))},getAccessChart:function(){var t=this;(void 0)().then((function(a){t.accessUsersData=a}))},getLoginChart:function(){var t=this;(void 0)().then((function(a){t.accessLoginData=a}))},getBarData:function(t){var a=this,e={};e.type=t;var n="(本月)";"days"===t?n="(七天)":"year"===t&&(n="(本年)"),this.barTitle="访问量排行"+n,u(e).then((function(t){a.barData=t}))},onChange:function(t,a){var e=this,n={type:"range"};n.startDate=a[0],n.endDate=a[1],u(n).then((function(t){e.barData=t}))},disabledDate:function(t){return t&&t>i()().endOf("day")}},mounted:function(){this.getLogInfo(),this.fetch(),this.getAccessChart(),this.getLoginChart(),this.getBarData("month")}},y=h,b=(e("2a6b"),e("2877")),v=Object(b["a"])(y,n,s,!1,null,"4df951e4",null);a["default"]=v.exports},"4de6":function(t,a,e){}}]);