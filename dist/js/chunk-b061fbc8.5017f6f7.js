(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b061fbc8"],{"46ad":function(t,e,r){"use strict";r.d(e,"b",(function(){return o})),r.d(e,"f",(function(){return i})),r.d(e,"e",(function(){return c})),r.d(e,"c",(function(){return l})),r.d(e,"g",(function(){return u})),r.d(e,"l",(function(){return s})),r.d(e,"a",(function(){return p})),r.d(e,"h",(function(){return d})),r.d(e,"d",(function(){return m})),r.d(e,"k",(function(){return f})),r.d(e,"i",(function(){return b})),r.d(e,"j",(function(){return h}));var n=r("b775"),a={add:"mr/add_report",query:"mr/query",update:"mr/update_report",statistic:"mr/report_statistical",overview:"mr/detail_report",details:"mr/report_detail_query",updateInfo:"mr/update_info",getRole:"mr/role",getPersonnelInfo:"mr/approval_personnel_query",getDailyByPerson:"mr/approval_mr_query",approveDaily:"mr/approval_mr_update",approveBatch:"mr/approval_mr_update_batch"};function o(t){return Object(n["b"])({url:a.approveBatch,method:"post",params:t})}function i(t){return Object(n["b"])({url:a.getPersonnelInfo,method:"post",params:t})}function c(t){return Object(n["b"])({url:a.getDailyByPerson,method:"post",params:t})}function l(t){return Object(n["b"])({url:a.approveDaily,method:"post",params:t})}function u(t){return Object(n["b"])({url:a.getRole,method:"post",params:t})}function s(t){return Object(n["b"])({url:a.updateInfo,method:"post",params:t})}function p(t){return Object(n["b"])({url:a.add,method:"post",params:t})}function d(t){return Object(n["b"])({url:a.overview,method:"post",params:t})}function m(t){return Object(n["b"])({url:a.details,method:"post",params:t})}function f(t){return Object(n["b"])({url:a.update,method:"post",params:t})}function b(t){return Object(n["b"])({url:a.query,method:"post",params:t})}function h(t){return Object(n["b"])({url:a.statistic,method:"post",params:t})}},"8ac3":function(t,e,r){"use strict";r.d(e,"i",(function(){return o})),r.d(e,"b",(function(){return i})),r.d(e,"h",(function(){return c})),r.d(e,"m",(function(){return l})),r.d(e,"j",(function(){return u})),r.d(e,"l",(function(){return s})),r.d(e,"g",(function(){return p})),r.d(e,"n",(function(){return d})),r.d(e,"q",(function(){return m})),r.d(e,"p",(function(){return f})),r.d(e,"e",(function(){return b})),r.d(e,"f",(function(){return h})),r.d(e,"k",(function(){return y})),r.d(e,"o",(function(){return g})),r.d(e,"a",(function(){return v})),r.d(e,"d",(function(){return _})),r.d(e,"r",(function(){return O})),r.d(e,"c",(function(){return j}));var n=r("b775"),a={query:"supplier/query",add:"supplier/add",deleteData:"supplier/del",update:"supplier/update",submit:"supplier/submit",audit:"supplier/audit",reject:"supplier/reject",getDicByType:"dict/getByType",getDicAll:"dict/all",getProvice:"org/province",getVendor:"/org/vendor",getAnylisisList:"/supplier/multi_statistics",getProjectStatic:"/supplier/project_statistical",getStatustics:"/supplier/level_statistical",getProjectsDetail:"/supplier/detail",getToDo:"/supplier/todo",getHnStatustics:"/supplier/Hn_level_statistical",addScore:"/score/add_score",updateScore:"/score/update_score",getPscore:"/score/detail_employees_score",getVscore:"/score/detail_supplier_score"};function o(t){return Object(n["b"])({url:a.getProjectStatic,method:"post",params:t})}function i(t){return Object(n["b"])({url:a.addScore,method:"post",params:t})}function c(t){return Object(n["b"])({url:a.getAnylisisList,method:"post",params:t})}function l(t){return Object(n["b"])({url:a.getToDo,method:"post",params:t})}function u(t){return Object(n["b"])({url:a.getProjectsDetail,method:"post",params:t})}function s(t){return Object(n["b"])({url:a.getStatustics,method:"post",params:t})}function p(t){return Object(n["b"])({url:a.getHnStatustics,method:"post",params:t})}function d(t){return Object(n["b"])({url:a.getVendor,method:"get",params:t})}function m(t){return Object(n["b"])({url:a.submit,method:"post",params:t})}function f(t){return Object(n["b"])({url:a.reject,method:"post",params:t})}function b(t){return Object(n["b"])({url:a.getDicAll,method:"get",params:t})}function h(t){return Object(n["b"])({url:a.getDicByType,method:"get",params:t})}function y(t){return Object(n["b"])({url:a.getProvice,method:"get",params:t})}function g(t){return Object(n["b"])({url:a.query,method:"post",params:t})}function v(t){return Object(n["b"])({url:a.add,method:"post",params:t})}function _(t){return Object(n["b"])({url:a.deleteData,method:"post",params:t})}function O(t){return Object(n["b"])({url:a.update,method:"post",params:t})}function j(t){return Object(n["b"])({url:a.audit,method:"post",params:t})}},c984:function(t,e,r){"use strict";r.r(e);r("b0c0");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"table-page-search-wrapper",staticStyle:{"margin-left":"12px","margin-top":"12px"}},[e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:32}},[e("a-col",{attrs:{md:6,lg:5}},[e("a-form-item",{attrs:{label:"填写人"}},[e("a-input",{attrs:{allowClear:""},model:{value:t.queryItem.name,callback:function(e){t.$set(t.queryItem,"name",e)},expression:"queryItem.name"}})],1)],1),e("a-col",{attrs:{md:6,lg:5}},[e("a-form-item",{attrs:{label:"时间"}},[e("a-month-picker",{staticStyle:{width:"100%"},attrs:{format:"YYYY-MM"},model:{value:t.queryItem.daily_time,callback:function(e){t.$set(t.queryItem,"daily_time",e)},expression:"queryItem.daily_time"}})],1)],1),e("a-col",{attrs:{md:6,lg:5}},[e("a-form-item",{attrs:{label:"公司"}},[e("a-select",{attrs:{placeholder:"请选择",allowClear:t.allowClearVendor},model:{value:t.queryItem.vendor,callback:function(e){t.$set(t.queryItem,"vendor",e)},expression:"queryItem.vendor"}},t._l(t.vendorOptions,(function(r){return e("a-select-option",{key:r.dept_name},[t._v(t._s(r.dept_name))])})),1)],1)],1),e("a-col",{staticStyle:{"padding-right":"5px"},attrs:{md:5,lg:4}},[e("a-form-item",{attrs:{label:"项目"}},[e("a-select",{attrs:{placeholder:"请选择",allowClear:t.allowClearProject},on:{change:t.onChange},model:{value:t.queryItem.province,callback:function(e){t.$set(t.queryItem,"province",e)},expression:"queryItem.province"}},t._l(t.provinceOptions,(function(r){return e("a-select-option",{key:r},[t._v(" "+t._s(r)+" ")])})),1)],1)],1),e("a-col",{staticStyle:{"padding-left":"0px"},attrs:{md:4,lg:3}},[e("a-form-item",[e("a-select",{attrs:{placeholder:"请选择",allowClear:t.allowClearProject},on:{change:t.onChange},model:{value:t.queryItem.cbt,callback:function(e){t.$set(t.queryItem,"cbt",e)},expression:"queryItem.cbt"}},t._l(t.cbtOptions,(function(r){return e("a-select-option",{key:r},[t._v(" "+t._s(r)+" ")])})),1)],1)],1)],1),e("a-row",{attrs:{gutter:32}},[e("a-col",{attrs:{md:6,lg:5}},[e("a-form-item",{attrs:{label:"PO number"}},[e("a-input",{attrs:{allowClear:""},model:{value:t.queryItem.poid,callback:function(e){t.$set(t.queryItem,"poid",e)},expression:"queryItem.poid"}})],1)],1),e("a-col",{attrs:{md:12,lg:10}},[e("a-form-item",{attrs:{label:"分组排序字段：",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[e("a-checkbox-group",{attrs:{name:"groupby",options:t.plainOptions},on:{change:t.onChange},model:{value:t.checkValue,callback:function(e){t.checkValue=e},expression:"checkValue"}})],1)],1),e("a-col",{attrs:{md:6,lg:5}},[e("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"right"}},[e("a-button",{staticStyle:{"margin-right":"8px"},attrs:{disabled:t.disabled,type:"primary"},on:{click:function(e){return t.$refs.table.refresh(!0)}}},[t._v("查询")]),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){t.queryItem={},t.checkValue=["vendor","monthly_report_time"]}}},[t._v("重置")]),e("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:t.exportListData}},[t._v("导出")])],1)])],1)],1),e("s-table",{ref:"table",staticStyle:{"margin-top":"20px"},attrs:{size:"middle",columns:t.columns,data:t.loadData,scroll:{x:!0},rowKey:function(t,e){return e}}})],1)},a=[],o=r("5530"),i=(r("99af"),r("4de4"),r("b64b"),r("d3b7"),r("159b"),r("c32d")),c=r.n(i),l=r("2af9"),u=r("8ac3"),s=r("46ad"),p=[{align:"center",title:"Package数",dataIndex:"wtr_counts",key:"wtr_counts"},{align:"center",title:"有效Package数",dataIndex:"package_count",key:"package_count"},{align:"center",title:"填写人数",dataIndex:"used",key:"used"}],d=[{align:"center",title:"月份",dataIndex:"monthly_report_time",key:"monthly_report_time"},{align:"center",title:"公司",dataIndex:"vendor",key:"vendor"},{align:"center",title:"项目省",dataIndex:"province",key:"province"},{align:"center",title:"项目运营商",dataIndex:"cbt",key:"cbt"},{align:"center",title:"填写人",dataIndex:"name",key:"name"}],m={daily_time:c()(new Date),vendor:"",province:"",cbt:"",poid:""},f={name:"Statistic",components:{STable:l["b"]},data:function(){var t=this;return{queryItem:m,allowClearProject:!0,allowClearVendor:!0,vendorOptions:[],provinceOptions:[],cbtOptions:[],dicArray:[],disabled:!1,labelCol:{lg:{span:6},xs:{span:24},sm:{span:19}},wrapperCol:{lg:{span:18},xs:{span:24},sm:{span:19}},checkValue:["vendor","monthly_report_time"],plainOptions:[{label:"月份",value:"monthly_report_time"},{label:"公司",value:"vendor"},{label:"项目",value:"project"},{label:"填写人",value:"name"}],columns:p,loadData:function(e){var r=t.handleParam();return t.columns=[],t.columns=d.filter((function(e){return t.checkValue.indexOf(e.dataIndex)>-1})).concat(p),Object(s["j"])(Object.assign({},e,r)).then((function(t){var e=t.list;return e}))}}},watch:{checkValue:function(t){this.disabled=0===t.length,0===t.length&&this.$message.info("分组排序字段至少选择一项")}},created:function(){var t=this;Object(s["g"])().then((function(e){var r=e.list;Object(u["n"])().then((function(e){r&&"vendor"===r.role?(t.allowClearVendor=!1,t.vendorOptions=e.data.filter((function(t){return r.permission.split(",").indexOf(t.dept_name)>-1})),t.queryItem.vendor=t.vendorOptions[0].dept_name):(t.allowClearVendor=!0,t.vendorOptions=e.data)})),Object(u["k"])().then((function(e){var n=[];e.data.forEach((function(t){n.push(t.dept_name)})),r&&"pm"===r.role?(t.allowClearProject=!1,t.provinceOptions=n.filter((function(t){var e=!1;return r.permission.split(",").forEach((function(r){r.indexOf(t)>-1&&(e=!0)})),!0===e})),t.queryItem.province=t.provinceOptions[0]):(t.allowClearProject=!0,t.provinceOptions=n)})),Object(u["e"])().then((function(e){t.dicArray=e.data,r&&"pm"===r.role?(t.allowClearProject=!1,t.cbtOptions=t.getDataByType("cbt").filter((function(t){var e=!1;return r.permission.split(",").forEach((function(r){r.indexOf(t)>-1&&(e=!0)})),!0===e})),t.queryItem.cbt=t.cbtOptions[0]):(t.allowClearProject=!0,t.cbtOptions=t.getDataByType("cbt"))}))}))},methods:{getDataByType:function(t){var e=[];if(this.dicArray.length>0)return this.dicArray.forEach((function(r){r.dic_type===t&&e.push(r.dic_value)})),e},handleParam:function(){var t={},e=this.checkValue,r={};e.indexOf("project")>-1&&(e.push("province"),e.push("cbt")),e=e.filter((function(t){return"project"!==t})),e.forEach((function(t){r["group_"+t]=1}));var n=c()(this.queryItem.daily_time).format("L").split("/")[1],a=c()(this.queryItem.daily_time).year(),i=Object(o["a"])({},this.queryItem);delete i.daily_time;var l=n&&a?"P".concat(n,".Y").concat(a):"";return t=e.length>0?Object.assign({},i,{monthly_report_time:l},r):Object.assign({},i,{monthly_report_time:l}),t},exportListData:function(){for(var t="/api",e=Object.assign({},this.handleParam()),r="",n=Object.keys(e),a=0;a<n.length;a++)""!==e[n[a]]&&(r+=n[a]+"="+e[n[a]]+"&");window.location.href=t+"/mr/report_statistical_export?"+r+"token="+this.$route.query.token},onChange:function(){}}},b=f,h=r("2877"),y=Object(h["a"])(b,n,a,!1,null,null,null);e["default"]=y.exports}}]);