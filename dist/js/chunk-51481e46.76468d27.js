(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51481e46","chunk-66071285"],{2143:function(e,t,a){},"5b64":function(e,t,a){"use strict";a.d(t,"d",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"i",(function(){return l})),a.d(t,"k",(function(){return c})),a.d(t,"b",(function(){return u})),a.d(t,"e",(function(){return d})),a.d(t,"c",(function(){return m})),a.d(t,"h",(function(){return p})),a.d(t,"g",(function(){return h})),a.d(t,"f",(function(){return f})),a.d(t,"j",(function(){return b}));var r=a("b775"),n={page:"/common/page/portal.t_sys_menu",add:"/menu/add",delete:"/menu/delete",role:"/role"},o="menu_id,system_id,menu_url,component,parent_id,clazz,style,menu_name,create_date,create_by,level,sort_no,status";function s(e){e.fields=o;var t=[];if(e.menu_name){var a={col:"menu_name"};a.value=e.menu_name,a.opt="=",t.push(a)}return t.length>0&&(e.wheres=JSON.stringify([t])),Object(r["b"])({url:n.page,method:"post",params:e})}function i(e){return delete e.system_name,Object(r["b"])({url:n.add,method:"post",params:e})}function l(e){return Object(r["b"])({url:"/menu/update",method:"post",params:e})}function c(e){var t={status:e.status};e.set=JSON.stringify(t);var a=[];if(e.menu_id){var o={col:"menu_id"};o.value=e.menu_id,o.opt="=",a.push(o)}return a.length>0&&(e.wheres=JSON.stringify(a)),Object(r["b"])({url:n.update,method:"post",params:e})}function u(e){var t={menuId:e.menu_id};return Object(r["b"])({url:n.delete,method:"post",params:t})}function d(e){return Object(r["b"])({url:"menu/getMenuTree",method:"get",params:e})}function m(e){return Object(r["b"])({url:"menu/getDirectoryMenuTree",method:"get",params:e})}function p(e){return Object(r["b"])({url:"menu/queryMenuTree",method:"get",params:e})}function h(e){return Object(r["b"])({url:"menu/getSystems",method:"get",params:e})}function f(e){return Object(r["b"])({url:"menu/getSubMenus",method:"get",params:e})}function b(e){return Object(r["b"])({url:"menu/updateSortNo",method:"post",params:e})}},"7e6e":function(e,t,a){"use strict";a("2143")},b32f:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{width:900,keyboard:!1,closable:!1,centered:!0,maskClosable:!1,mask:!1,okText:"确认",cancelText:"取消"},on:{ok:e.ok,cancel:e.cancel},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t("a-tabs",[t("a-tab-pane",{key:"1",attrs:{tab:"方向性图标"}},[t("ul",e._l(e.icons.directionIcons,(function(a){return t("li",{key:a},[t("a-icon",{class:{active:e.activeIndex===a},attrs:{type:a,title:a},on:{click:function(t){return e.chooseIcon(a)}}})],1)})),0)]),t("a-tab-pane",{key:"2",attrs:{tab:"指示性图标"}},[t("ul",e._l(e.icons.suggestionIcons,(function(a){return t("li",{key:a},[t("a-icon",{class:{active:e.activeIndex===a},attrs:{type:a,title:a},on:{click:function(t){return e.chooseIcon(a)}}})],1)})),0)]),t("a-tab-pane",{key:"3",attrs:{tab:"编辑类图标"}},[t("ul",e._l(e.icons.editIcons,(function(a){return t("li",{key:a},[t("a-icon",{class:{active:e.activeIndex===a},attrs:{type:a,title:a},on:{click:function(t){return e.chooseIcon(a)}}})],1)})),0)]),t("a-tab-pane",{key:"4",attrs:{tab:"数据类图标"}},[t("ul",e._l(e.icons.dataIcons,(function(a){return t("li",{key:a},[t("a-icon",{class:{active:e.activeIndex===a},attrs:{type:a,title:a},on:{click:function(t){return e.chooseIcon(a)}}})],1)})),0)]),t("a-tab-pane",{key:"5",attrs:{tab:"网站通用图标"}},[t("ul",e._l(e.icons.webIcons,(function(a){return t("li",{key:a},[t("a-icon",{class:{active:e.activeIndex===a},attrs:{type:a,title:a},on:{click:function(t){return e.chooseIcon(a)}}})],1)})),0)]),t("a-tab-pane",{key:"6",attrs:{tab:"品牌和标识"}},[t("ul",e._l(e.icons.logoIcons,(function(a){return t("li",{key:a},[t("a-icon",{class:{active:e.activeIndex===a},attrs:{type:a,title:a},on:{click:function(t){return e.chooseIcon(a)}}})],1)})),0)])],1)],1)},n=[],o=["step-backward","step-forward","fast-backward","fast-forward","shrink","arrows-alt","down","up","left","right","caret-up","caret-down","caret-left","caret-right","up-circle","down-circle","left-circle","right-circle","up-circle-o","down-circle-o","right-circle-o","left-circle-o","double-right","double-left","vertical-left","vertical-right","forward","backward","rollback","enter","retweet","swap","swap-left","swap-right","arrow-up","arrow-down","arrow-left","arrow-right","play-circle","play-circle-o","up-square","down-square","left-square","right-square","up-square-o","down-square-o","left-square-o","right-square-o","login","logout","menu-fold","menu-unfold","border-bottom","border-horizontal","border-inner","border-left","border-right","border-top","border-verticle","pic-center","pic-left","pic-right","radius-bottomleft","radius-bottomright","radius-upleft","radius-upright","fullscreen","fullscreen-exit"],s=["question","question-circle","plus","plus-circle","pause","pause-circle","minus","minus-circle","plus-square","minus-square","info","info-circle","exclamation","exclamation-circle","close","close-circle","close-square","check","check-circle","check-square","clock-circle","warning","issues-close","stop"],i=["edit","form","copy","scissor","delete","snippets","diff","highlight","align-center","align-left","align-right","bg-colors","bold","italic","underline","strikethrough","redo","undo","zoom-in","zoom-out","font-colors","font-size","line-height","colum-height","dash","small-dash","sort-ascending","sort-descending","drag","ordered-list","radius-setting"],l=["area-chart","pie-chart","bar-chart","dot-chart","line-chart","radar-chart","heat-map","fall","rise","stock","box-plot","fund","sliders"],c=["lock","unlock","bars","book","calendar","cloud","cloud-download","code","copy","credit-card","delete","desktop","download","ellipsis","file","file-text","file-unknown","file-pdf","file-word","file-excel","file-jpg","file-ppt","file-markdown","file-add","folder","folder-open","folder-add","hdd","frown","meh","smile","inbox","laptop","appstore","link","mail","mobile","notification","paper-clip","picture","poweroff","reload","search","setting","share-alt","shopping-cart","tablet","tag","tags","to-top","upload","user","video-camera","home","loading","loading-3-quarters","cloud-upload","star","heart","environment","eye","camera","save","team","solution","phone","filter","exception","export","customer-service","qrcode","scan","like","dislike","message","pay-circle","calculator","pushpin","bulb","select","switcher","rocket","bell","disconnect","database","compass","barcode","hourglass","key","flag","layout","printer","sound","usb","skin","tool","sync","wifi","car","schedule","user-add","user-delete","usergroup-add","usergroup-delete","man","woman","shop","gift","idcard","medicine-box","red-envelope","coffee","copyright","trademark","safety","wallet","bank","trophy","contacts","global","shake","api","fork","dashboard","table","profile","alert","audit","branches","build","border","crown","experiment","fire","money-collect","property-safety","read","reconciliation","rest","security-scan","insurance","interation","safety-certificate","project","thunderbolt","block","cluster","deployment-unit","dollar","euro","pound","file-done","file-exclamation","file-protect","file-search","file-sync","gateway","gold","robot","shopping"],u=["android","apple","windows","ie","chrome","github","aliwangwang","dingding","weibo-square","weibo-circle","taobao-circle","html5","weibo","twitter","wechat","youtube","alipay-circle","taobao","skype","qq","medium-workmark","gitlab","medium","linkedin","google-plus","dropbox","facebook","codepen","amazon","google","codepen-circle","alipay","ant-design","aliyun","zhihu","slack","slack-square","behance","behance-square","dribbble","dribbble-square","instagram","yuque","alibaba","yahoo"],d={name:"Icons",props:{iconChooseVisible:{default:!1}},data:function(){return{icons:{directionIcons:o,suggestionIcons:s,editIcons:i,dataIcons:l,webIcons:c,logoIcons:u},choosedIcon:"",activeIndex:""}},computed:{show:{get:function(){return this.iconChooseVisible},set:function(){}}},methods:{reset:function(){this.activeIndex=""},chooseIcon:function(e){this.activeIndex=e,this.choosedIcon=e,this.$message.success("选中 ".concat(e))},ok:function(){""!==this.choosedIcon?(this.reset(),this.$emit("choose",this.choosedIcon)):this.$message.warning("尚未选择任何图标")},cancel:function(){this.reset(),this.$emit("close")}}},m=d,p=(a("7e6e"),a("2877")),h=Object(p["a"])(m,r,n,!1,null,"2c078c3e",null);t["default"]=h.exports},b90e:function(e,t,a){"use strict";a.r(t);a("a9e3"),a("d3b7"),a("25f0");var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:800,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-card",{attrs:{bordered:!1}},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("a-row",{staticClass:"form-row",attrs:{gutter:16}},[t("a-col",{attrs:{span:12}},[e.isSubMenu?t("a-form-item",{attrs:{label:"所属系统",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("span",{staticClass:"ant-form-text"},[e._v(" "+e._s(e.system_name)+" ")])]):t("a-form-item",{attrs:{label:"所属系统",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["system_name",{initialValue:e.system_name,rules:[{message:"请选择所属系统"}]}],expression:"[\n                  'system_name',\n                  {initialValue: system_name, rules: [{ message: '请选择所属系统'}]} ]"}],attrs:{placeholder:"请选择所属系统"},on:{change:e.onSystemChange}},e._l(e.systemsData,(function(a){return t("a-select-option",{key:a.id,attrs:{value:a.sys_name}},[e._v(e._s(a.sys_name))])})),1)],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"菜单名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["menu_name",{rules:[{required:!0,message:"请输入菜单标题",whitespace:!0}]}],expression:"[\n                  'menu_name',\n                  {rules: [{ required: true, message: '请输入菜单标题', whitespace: true}]}\n                ]"}],attrs:{placeholder:""}})],1)],1)],1),t("a-row",{staticClass:"form-row",attrs:{gutter:16}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"所属目录",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parent_name",{initialValue:e.parent_id.toString()}],expression:"[\n                  'parent_name',\n                  {\n                    initialValue:parent_id.toString()\n                  }]"}],attrs:{dropdownStyle:{maxHeight:"400px",overflow:"auto"},treeData:e.treeData,placeholder:"请选择所属目录",treeDefaultExpandAll:""},on:{change:e.onChange}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"菜单类别",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["clazz",{initialValue:"2"},{rules:[{required:!0,message:"必填"},{type:"number",message:"请输入数字",transform:function(e){return Number(e)}}]}],expression:"[\n                  'clazz',\n                  {\n                    initialValue:'2'\n                  },\n                  {rules: [{ required: true, message: '必填'},{ type: 'number',message: '请输入数字', transform:(value)=> {return Number(value)}}]}]"}],on:{change:e.onClazzChange}},[t("a-radio",{attrs:{value:"1"}},[e._v("目录")]),t("a-radio",{attrs:{value:"2"}},[e._v("模块")])],1)],1)],1)],1),t("a-row",{staticClass:"form-row",attrs:{gutter:16}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"URL",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["menu_url",{rules:[{required:!0,message:"请输入路径",whitespace:!0}]}],expression:"[\n                  'menu_url',\n                  {rules: [{ required: true, message: '请输入路径', whitespace: true}]}\n                ]"}],attrs:{placeholder:""}})],1)],1),t("a-col",{attrs:{span:11}},[t("a-form-item",{attrs:{label:"对应组件",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["component",{rules:[{required:!0,message:"请输入对应组件",whitespace:!0}]}],expression:"[\n                  'component',\n                  {rules: [{ required: true, message: '请输入对应组件', whitespace: true}]}\n                ]"}],ref:"icons",attrs:{placeholder:""}})],1)],1),t("a-col",{attrs:{span:1}},[t("a-popover",{attrs:{placement:"topLeft"}},[t("template",{slot:"content"},[t("p",[e._v("本系统功能：配置对应的文件路径")]),t("p",[e._v("外部子系统功能本标签页打开：iframe")]),t("p",[e._v("外部子系统功能新标签页打开：_blank")])]),t("span",{attrs:{slot:"title"},slot:"title"},[e._v("组件提示")]),t("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"question-circle"}})],2)],1)],1),t("a-row",{staticClass:"form-row",attrs:{gutter:16}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"排序",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort_no",{initialValue:"1"},{rules:[{required:!0,message:"必填"},{type:"number",message:"请输入数字",transform:function(e){return Number(e)}}]}],expression:"[\n                  'sort_no',\n                  {\n                    initialValue:'1'\n                  },\n                  {rules: [{ required: true, message: '必填'},{ type: 'number',message: '请输入数字', transform:(value)=> {return Number(value)}}]}\n                ]"}],attrs:{min:1,max:100}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{attrs:{label:"菜单状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:"1"},{rules:[{required:!0,message:"必填"}]}],expression:"[\n                  'status',\n                  {\n                    initialValue:'1'\n                  },\n                  {rules: [{ required: true, message: '必填'}]}\n                ]"}]},[t("a-radio",{attrs:{value:"1"}},[e._v("启用")]),t("a-radio",{attrs:{value:"0"}},[e._v("禁用")])],1)],1)],1)],1),t("a-row",{staticClass:"form-row",attrs:{gutter:16}},[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:"图标",labelCol:{lg:{span:3},sm:{span:3}},wrapperCol:{lg:{span:21},sm:{span:21}}}},[t("a-input",{ref:"icons",attrs:{placeholder:""},model:{value:e.menu.icon,callback:function(t){e.$set(e.menu,"icon",t)},expression:"menu.icon"}},[e.menu.icon?t("a-icon",{attrs:{slot:"suffix",type:"close-circle"},on:{click:e.deleteIcons},slot:"suffix"}):e._e(),t("a-icon",{staticStyle:{cursor:"pointer"},attrs:{slot:"addonAfter",type:"setting"},on:{click:e.chooseIcons},slot:"addonAfter"})],1)],1)],1)],1)],1)],1),t("icons",{attrs:{iconChooseVisible:e.iconChooseVisible},on:{choose:e.handleIconChoose,close:e.handleIconCancel}})],1)},n=[],o=a("b32f"),s=a("5b64"),i={name:"MenuForm",components:{updateMenu2:s["i"],Icons:o["default"]},props:{systemTree:{type:Array,required:!0},isSubMenu:{type:Boolean,required:!0}},data:function(){return{isEdit:!1,title:"",treeData:[],isModule:!1,parent_id:"0",parent_name:"",system_id:"",system_name:"",visible:!1,labelCol:{lg:{span:6},sm:{span:6}},wrapperCol:{lg:{span:18},sm:{span:18}},parent:void 0,menu:{icon:""},confirmLoading:!1,iconChooseVisible:!1,form:this.$form.createForm(this)}},watch:{},mounted:function(){this.getSystems()},computed:{systemsData:function(){return this.systemTree&&this.systemTree[0]?this.systemTree[0].children:[]}},methods:{getSystems:function(){var e=this;Object(s["g"])().then((function(t){e.systemData=t[0].children}))},menuTree:function(e){var t=this;return Object(s["c"])(e).then((function(e){t.treeData=e}))},add:function(e,t,a){this.isModule=!1,this.form.resetFields(),this.menuTree({system_id:t||0}),0!==t&&(this.system_id=t,this.system_name=a),this.parent_id=e.menu_id?e.menu_id:"0",this.parent_name=e.menu_name;var r={};r.system_id=this.system_id,r.system_name=this.system_name,r.parent_id=this.parent_id,r.parent_name=this.parent_name,this.isEdit=!1,this.title="新建菜单",this.visible=!0;var n=this.form.setFieldsValue;this.$nextTick((function(){n(r)}))},edit:function(e){"2"===e.clazz?this.isModule=!0:this.isModule=!1,this.system_id=e.system_id,this.menuTree({system_id:e.system_id}),this.isEdit=!0,this.title="编辑菜单",this.visible=!0,this.parent_id=e.parent_id,this.parent_name=e.parent_name,this.system_name=e.system_name,this.menu_id=e.menu_id,this.menu.icon=e.style,e.status=e.status.toString();var t=this.form.setFieldsValue;this.$nextTick((function(){t(e)}))},onSearch:function(e){this.visible=!0},onChange:function(e,t,a){var r=a.triggerNode.$options.propsData.dataRef;this.parent_id=r.menu_id,this.parent_name=e},onSystemChange:function(e,t){var a=t.componentOptions.propsData.value;this.system_name="所有系统"===a?"":a,this.system_id=t.key},onClazzChange:function(e){"2"===e.target.value?this.isModule=!0:this.isModule=!1},deleteIcons:function(){this.menu.icon=""},chooseIcons:function(){this.iconChooseVisible=!0},handleIconCancel:function(){this.iconChooseVisible=!1},handleIconChoose:function(e){this.menu.icon=e,this.iconChooseVisible=!1},handleOk:function(){this.visible=!1},handleCancel:function(){this.visible=!1},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){if(!e)return delete a["parent_name"],a.parent_id=t.parent_id,a.system_id=t.system_id,a.style=t.menu.icon,t.isEdit?(a.menu_id=t.menu_id,Object(s["i"])(Object.assign(a)).then((function(e){"ok"===e.state?(t.visible=!1,t.$emit("ok",a)):t.$error({title:"错误提示",content:e.msg})}))):Object(s["a"])(Object.assign(a)).then((function(e){"ok"===e.state?(t.visible=!1,t.$emit("ok",a)):t.$error({title:"错误提示",content:e.msg})}))}))}}},l=i,c=a("2877"),u=Object(c["a"])(l,r,n,!1,null,null,null);t["default"]=u.exports}}]);