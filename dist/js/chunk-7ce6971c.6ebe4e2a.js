(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ce6971c","chunk-2fe33510","chunk-0f0949c3"],{"5b34":function(e,t,n){"use strict";n.r(t);n("b0c0");var a=function(){var e=this,t=e._self._c;return t("a-layout-content",{style:{background:"#fff",padding:"24px",margin:0,minHeight:"280px"}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{md:8,sm:24}}),t("a-col",{attrs:{md:16,sm:24}},[t("a-row",{attrs:{gutter:12}},[t("a-col",{attrs:{md:9,sm:24}},[t("a-form-item",{attrs:{label:"填写人"}},[t("a-input",{attrs:{placeholder:"请输入",allowClear:""},model:{value:e.queryItem.name,callback:function(t){e.$set(e.queryItem,"name",t)},expression:"queryItem.name"}})],1)],1),t("a-col",{attrs:{md:9,sm:24}},[t("a-form-item",{attrs:{label:"公司"}},[t("a-select",{attrs:{placeholder:"请选择",allowClear:""},model:{value:e.queryItem.vendor,callback:function(t){e.$set(e.queryItem,"vendor",t)},expression:"queryItem.vendor"}},e._l(e.vendorOptions,(function(n){return t("a-select-option",{key:n.dept_id},[e._v(e._s(n.dept_name))])})),1)],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons"},[t("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),t("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryItem={}}}},[e._v("重置")])],1)])],1)],1)],1)],1)],1),t("s-table",{ref:"table",attrs:{size:"default",columns:e.columns,data:e.loadData,scroll:{x:!0},rowKey:function(e){return e.id}},scopedSlots:e._u([{key:"onjob",fn:function(n){return t("span",{},[t("a-tag",{attrs:{color:"在岗"===n?"blue":"空闲"===n?"geekblue":"volcano"}},[e._v(" "+e._s(n)+" ")])],1)}},{key:"experience",fn:function(n){return[t("span",{staticClass:"smileDark",attrs:{title:n}},[e._v(e._s(n))])]}},{key:"action",fn:function(n,a){return t("span",{},[t("a",{on:{click:function(t){return e.$refs.auditModal.edit(a,"批准")}}},[e._v("批准")]),t("a-divider",{attrs:{type:"vertical"}}),t("a",{staticStyle:{color:"red"},attrs:{type:"delete"},on:{click:function(t){return e.$refs.auditModal.edit(a,"驳回")}}},[e._v("驳回")])],1)}},{key:"projects",fn:function(n,a){return[t("a",{on:{click:function(t){return e.OpenDetail(a)}}},[e._v(" "+e._s(n)+" ")])]}}])}),t("projects-form",{ref:"detailContent",attrs:{visible:e.visible,id:e.id},on:{cancel:e.handleCancel}}),t("audit-form",{ref:"auditModal",on:{ok:e.handleOk}})],1)},i=[],r=n("5530"),o=n("2af9"),s=n("8ac3"),l=n("d5d2"),c=n("fcbb"),u=[{align:"center",title:"填写人",dataIndex:"name",key:"name",fixed:"left",width:100},{align:"center",title:"电话",dataIndex:"mobile",key:"mobile"},{align:"center",title:"身份证号",dataIndex:"idcard",key:"idcard"},{align:"center",title:"公司",dataIndex:"vendor",key:"vendor"},{align:"center",title:"是否在岗",dataIndex:"onjob",key:"onjob",scopedSlots:{customRender:"onjob"}},{align:"center",title:"项目省",dataIndex:"province",key:"province"},{align:"center",title:"项目运营商",dataIndex:"cbt",key:"cbt"},{align:"center",title:"项目经理",dataIndex:"pm",key:"pm"},{align:"center",title:"产品技能",dataIndex:"product_skills",key:"product_skills"},{align:"center",title:"业务技能",dataIndex:"business_skills",key:"business_skills"},{align:"center",title:"Package",dataIndex:"level",key:"level"},{align:"center",title:"SPC",dataIndex:"spc",key:"spc"},{align:"center",title:"半年工作经验",dataIndex:"experience",key:"experience",scopedSlots:{customRender:"experience"}},{align:"center",title:"Base省",dataIndex:"base_province",key:"base_province"},{align:"center",title:"Base市",dataIndex:"base_city",key:"base_city"},{align:"center",title:"提交者",dataIndex:"submitter",key:"submitter"},{align:"center",title:"提交时间",dataIndex:"submit_time",key:"submit_time"},{align:"center",title:"审批人",dataIndex:"approver",key:"approver"},{align:"center",title:"审批时间",dataIndex:"approve_time",key:"approve_time"},{align:"center",title:"审批状态",dataIndex:"status",key:"status"},{align:"center",title:"审批备注",dataIndex:"note",key:"note"},{align:"center",title:"员工重要程度",dataIndex:"priority",key:"priority"},{align:"center",title:"释放时间",dataIndex:"release_time",key:"release_time"},{align:"center",title:"项目参与数",dataIndex:"projects",key:"projects",scopedSlots:{customRender:"projects"}},{align:"center",title:"操作",key:"action",scopedSlots:{customRender:"action"},fixed:"right",width:150}],d={name:"Index",components:{STable:o["l"],AuditForm:l["default"],ProjectsForm:c["default"]},data:function(){var e=this;return{data:[],vendorOptions:[],queryItem:{status:"未审核",onjob:"在岗"},columns:u,id:0,visible:!1,loadData:function(t){return Object(s["m"])(Object(r["a"])(Object(r["a"])({},e.queryItem),t)).then((function(e){var t=e.list;return t}))}}},created:function(){var e=this;Object(s["n"])().then((function(t){e.vendorOptions=t.data}))},methods:{handleOk:function(){this.$refs.table.refresh()},OpenDetail:function(e){this.visible=!0,this.id=e.id,this.$nextTick((function(){this.$refs.detailContent.detailList({pageNo:1,pageSize:10})}))},handleCancel:function(){this.visible=!1}}},p=d,m=(n("7c00"),n("2877")),f=Object(m["a"])(p,a,i,!1,null,"4304744d",null);t["default"]=f.exports},"7c00":function(e,t,n){"use strict";n("912b")},"8ac3":function(e,t,n){"use strict";n.d(t,"i",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"h",(function(){return s})),n.d(t,"m",(function(){return l})),n.d(t,"j",(function(){return c})),n.d(t,"l",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"n",(function(){return p})),n.d(t,"q",(function(){return m})),n.d(t,"p",(function(){return f})),n.d(t,"e",(function(){return b})),n.d(t,"f",(function(){return g})),n.d(t,"k",(function(){return h})),n.d(t,"o",(function(){return v})),n.d(t,"a",(function(){return y})),n.d(t,"d",(function(){return k})),n.d(t,"r",(function(){return _})),n.d(t,"c",(function(){return x}));var a=n("b775"),i={query:"supplier/query",add:"supplier/add",deleteData:"supplier/del",update:"supplier/update",submit:"supplier/submit",audit:"supplier/audit",reject:"supplier/reject",getDicByType:"dict/getByType",getDicAll:"dict/all",getProvice:"org/province",getVendor:"/org/vendor",getAnylisisList:"/supplier/multi_statistics",getProjectStatic:"/supplier/project_statistical",getStatustics:"/supplier/level_statistical",getProjectsDetail:"/supplier/detail",getToDo:"/supplier/todo",getHnStatustics:"/supplier/Hn_level_statistical",addScore:"/score/add_score",updateScore:"/score/update_score",getPscore:"/score/detail_employees_score",getVscore:"/score/detail_supplier_score"};function r(e){return Object(a["b"])({url:i.getProjectStatic,method:"post",params:e})}function o(e){return Object(a["b"])({url:i.addScore,method:"post",params:e})}function s(e){return Object(a["b"])({url:i.getAnylisisList,method:"post",params:e})}function l(e){return Object(a["b"])({url:i.getToDo,method:"post",params:e})}function c(e){return Object(a["b"])({url:i.getProjectsDetail,method:"post",params:e})}function u(e){return Object(a["b"])({url:i.getStatustics,method:"post",params:e})}function d(e){return Object(a["b"])({url:i.getHnStatustics,method:"post",params:e})}function p(e){return Object(a["b"])({url:i.getVendor,method:"get",params:e})}function m(e){return Object(a["b"])({url:i.submit,method:"post",params:e})}function f(e){return Object(a["b"])({url:i.reject,method:"post",params:e})}function b(e){return Object(a["b"])({url:i.getDicAll,method:"get",params:e})}function g(e){return Object(a["b"])({url:i.getDicByType,method:"get",params:e})}function h(e){return Object(a["b"])({url:i.getProvice,method:"get",params:e})}function v(e){return Object(a["b"])({url:i.query,method:"post",params:e})}function y(e){return Object(a["b"])({url:i.add,method:"post",params:e})}function k(e){return Object(a["b"])({url:i.deleteData,method:"post",params:e})}function _(e){return Object(a["b"])({url:i.update,method:"post",params:e})}function x(e){return Object(a["b"])({url:i.audit,method:"post",params:e})}},"912b":function(e,t,n){},c7d9:function(e,t,n){"use strict";n("f030")},d5d2:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,width:600,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-card",{attrs:{"body-style":{padding:"20px"},bordered:!1}},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},["驳回"==e.status||"释放"==e.status?t("a-form-item",{attrs:{label:"驳回原因",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["note",{rules:[{required:!0,message:"请输入驳回原因",whitespace:!0}]}],expression:"[\n            'note',\n            {rules: [{ required: true, message: '请输入驳回原因', whitespace: true}]}\n          ]"}],attrs:{placeholder:""}})],1):e._e(),"释放"==e.status?t("a-form-item",{attrs:{label:"释放时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["release_time",{rules:[{type:"object",required:!0,message:"请选择日期",whitespace:!0}]}],expression:"[\n              'release_time',\n              {rules: [{ type: 'object', required: true, message: '请选择日期', whitespace: true }]}\n            ]"}],attrs:{format:"YYYY-MM-DD"}})],1):e._e(),"批准"==e.status?t("a-form-item",{attrs:{label:"员工重要程度",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["priority",{rules:[{required:!0,message:"请选择员工重要程度"}]}],expression:"[\n            'priority',\n            {rules: [{ required: true, message: '请选择员工重要程度'}]}\n          ]"}],attrs:{placeholder:"请选择"}},e._l(e.priorityOptions,(function(n){return t("a-select-option",{key:n},[e._v(" "+e._s(n)+" ")])})),1)],1):e._e()],1)],1)],1)},i=[],r=(n("d3b7"),n("159b"),n("322e")),o=n("8ac3"),s=n("c32d"),l=n.n(s),c={name:"DicForm",components:{AFormItem:r["a"]},data:function(){return{title:"",itemId:"",status:"",rejectFlag:"",priorityOptions:[],visible:!1,confirmLoading:!1,form:this.$form.createForm(this),labelCol:{lg:{span:6},xs:{span:24},sm:{span:19}},wrapperCol:{lg:{span:18},xs:{span:24},sm:{span:19}}}},created:function(){var e=this;Object(o["f"])({dict_type:"priority"}).then((function(t){var n=[];t.data.forEach((function(e){n.push(e.dic_value)})),e.priorityOptions=n}))},methods:{edit:function(e,t){this.title="".concat(t,"操作！"),this.rejectFlag="驳回"===t||"释放"===t,this.visible=!0,this.itemId=e.id,this.status=t;var n=this.form.setFieldsValue;this.$nextTick((function(){n({note:e.note?e.note:"",release_time:e.release_time?l()(e.release_time):l()(),priority:e.priority?e.priority:""})}))},handleOk:function(){this.visible=!1},handleCancel:function(){this.visible=!1},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,n){t.confirmLoading=!0;var a=t;function i(e){"ok"===e.state?(a.$message.success("审批成功",2),a.$emit("ok",n)):a.$message.error("审批失败",2),a.visible=!1,a.confirmLoading=!1}e||(n.release_time&&(n.release_time=n.release_time.format("YYYY-MM-DD HH:mm:ss")),t.itemId&&(n.id=t.itemId,n.status=t.status,t.rejectFlag?Object(o["p"])(n).then(i).catch((function(){t.confirmLoading=!1})):Object(o["c"])(n).then(i).catch((function(){t.confirmLoading=!1}))))}))}}},u=c,d=n("2877"),p=Object(d["a"])(u,a,i,!1,null,null,null);t["default"]=p.exports},f030:function(e,t,n){},fcbb:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"项目参与详情",width:1200,footer:null,visible:e.visible},on:{cancel:function(){e.$emit("cancel")}}},[t("a-table",{attrs:{bordered:"",size:"middle",rowKey:function(e,t){return t},columns:e.columns,dataSource:e.data,pagination:e.pagination,loading:e.visibleLoading,scroll:{x:!0},customRow:e.customRow,rowClassName:e.rowClassName},on:{change:e.handleTableChange}})],1)},i=[],r=n("5530"),o=(n("a9e3"),n("8ac3")),s={name:"ProjectsForm",props:{visible:{type:Boolean,required:!0},id:{type:Number,required:!0}},data:function(){return{visibleLoading:!1,data:[],clickItem:"",pagination:{pageNo:1,pageSize:10},columns:[{align:"center",title:"填写人",dataIndex:"name",key:"name"},{align:"center",title:"电话",dataIndex:"mobile",key:"mobile"},{align:"center",title:"公司",dataIndex:"vendor",key:"vendor"},{align:"center",title:"项目省",dataIndex:"province",key:"province"},{align:"center",title:"项目运营商",dataIndex:"cbt",key:"cbt"},{align:"center",title:"项目经理",dataIndex:"pm",key:"pm"},{align:"center",title:"产品技能",dataIndex:"product_skills",key:"product_skills"},{align:"center",title:"业务技能",dataIndex:"business_skills",key:"business_skills"},{align:"center",title:"Package",dataIndex:"level",key:"level"},{align:"center",title:"SPC",dataIndex:"spc",key:"spc"},{align:"center",title:"开始时间",dataIndex:"approve_time",key:"approve_time"},{align:"center",title:"释放时间",dataIndex:"release_time",key:"release_time"}]}},methods:{rowClassName:function(e,t){return t===this.clickItem?"selectItemClass":""},customRow:function(e,t){var n=this;return{on:{click:function(){n.clickItem=t}}}},handleTableChange:function(e){var t=Object(r["a"])({},this.pagination);t.pageNo=e.current,t.pageSize=e.pageSize,this.pagination=t,this.detailList()},detailList:function(e){var t=this,n=e||this.pagination;this.data=[],this.visibleLoading=!0,Object(o["j"])(Object.assign({},n,{id:this.id})).then((function(e){if(t.visibleLoading=!1,"ok"===e.state){var n=Object(r["a"])({},t.pagination);n.total=e.list.totalCount,n.showTotal=function(e){return"总 ".concat(e," 条")},n.pageNo=e.list.pageNo,n.current=e.list.pageNo,t.pagination=n,t.data=e.list.data}else t.$message.error(e.msg)}))}}},l=s,c=(n("c7d9"),n("2877")),u=Object(c["a"])(l,a,i,!1,null,"1d49bc28",null);t["default"]=u.exports}}]);